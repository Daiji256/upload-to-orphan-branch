name: "Upload to orphan branch"
description: "Upload files to an orphan branch."
author: "Daiji256"
branding:
  icon: "upload"
  color: "gray-dark"

inputs:
  branch:
    description: "Branch name to create or overwrite."
    required: true
  path:
    description: "A file or directory or wildcard pattern that describes what to upload."
    required: true
  committer-name:
    description: "Name of the committer."
    required: false
    default: "github-actions[bot]"
  committer-email:
    description: "Email of the committer."
    required: false
    default: "41898282+github-actions[bot]@users.noreply.github.com"
  commit-message:
    description: "Commit message."
    required: false
    default: ""
  if-no-files-found:
    description: >
      The desired behavior if no files are found using the provided path.

      Available Options:
      - ignore: Upload empty branch
      - error: Fail the action with an error message
    required: false
    default: "ignore"
  overwrite:
    description: >
      If true, overwrite branch with new files.
      If false, fail if branch already exists.
    required: false
    default: "false"
  include-hidden-files:
    description: >
      If true, include hidden files.
      If false, exclude hidden files.
    required: false
    default: "false"

runs:
  using: "composite"
  steps:
    - shell: bash
      env:
        BRANCH: ${{ inputs.branch }}
        FILES_PATH: ${{ inputs.path }}
        COMMITTER_NAME: ${{ inputs.committer-name }}
        COMMITTER_EMAIL: ${{ inputs.committer-email }}
        COMMIT_MESSAGE: ${{ inputs.commit-message }}
        IF_NO_FILES_FOUND: ${{ inputs.if-no-files-found }}
        OVERWRITE: ${{ inputs.overwrite }}
        INCLUDE_HIDDEN_FILES: ${{ inputs.include-hidden-files }}
      run: |
        bash ./main.sh
